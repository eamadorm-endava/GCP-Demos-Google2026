<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tierra de Café | Roasting Co.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=DM+Sans:wght@400;500;700&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cream': '#F9F7F2',
                        'earth': '#3E3B32',
                        'clay': '#A65D3B',
                        'olive': '#5F6F52'
                    },
                    fontFamily: {
                        'display': ['Anton', 'sans-serif'],
                        'body': ['DM Sans', 'sans-serif']
                    },
                    animation: {
                        'marquee': 'marquee 25s linear infinite',
                        'fade-up': 'fadeUp 0.8s ease-out forwards',
                    },
                    keyframes: {
                        marquee: {
                            '0%': { transform: 'translateX(0%)' },
                            '100%': { transform: 'translateX(-100%)' },
                        },
                        fadeUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #F9F7F2;
        }

        /* Hide scrollbar for marquee */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="font-body text-earth antialiased">

    <!-- Marquee Banner -->
    <div class="bg-earth text-cream py-2 overflow-hidden whitespace-nowrap">
        <div class="inline-block animate-marquee">
            <span class="mx-4 font-bold uppercase tracking-widest text-sm">Free Shipping on All Orders</span> •
            <span class="mx-4 font-bold uppercase tracking-widest text-sm">Direct Trade Sourcing</span> •
            <span class="mx-4 font-bold uppercase tracking-widest text-sm">Roasted in Small Batches</span> •
            <span class="mx-4 font-bold uppercase tracking-widest text-sm">Free Shipping on All Orders</span> •
            <span class="mx-4 font-bold uppercase tracking-widest text-sm">Direct Trade Sourcing</span> •
            <span class="mx-4 font-bold uppercase tracking-widest text-sm">Roasted in Small Batches</span> •
            <span class="mx-4 font-bold uppercase tracking-widest text-sm">Free Shipping on All Orders</span> •
            <span class="mx-4 font-bold uppercase tracking-widest text-sm">Direct Trade Sourcing</span> •
            <span class="mx-4 font-bold uppercase tracking-widest text-sm">Roasted in Small Batches</span>
        </div>
    </div>

    <!-- Nav -->
    <nav class="px-6 py-6 flex justify-between items-center max-w-7xl mx-auto">
        <div class="text-3xl font-display tracking-wide uppercase text-earth">
            Tierra<span class="text-clay">.</span>
        </div>
        <div class="hidden md:flex space-x-8 font-medium">
            <a href="#" class="hover:text-clay transition-colors">Shop</a>
            <a href="#" class="hover:text-clay transition-colors">Locations</a>
            <a href="#" class="hover:text-clay transition-colors">Wholesale</a>
        </div>
        <div class="flex items-center space-x-4">
            <button class="hover:text-clay transition">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="8" cy="21" r="1" />
                    <circle cx="19" cy="21" r="1" />
                    <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
                </svg>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <header
        class="relative bg-olive text-cream mb-16 mx-4 md:mx-6 rounded-2xl overflow-hidden min-h-[400px] flex items-center justify-center">
        <div class="text-center z-10 px-4">
            <h1 class="font-display text-5xl md:text-7xl uppercase mb-6 tracking-wider">Rooted in Earth</h1>
            <p class="max-w-xl mx-auto text-lg md:text-xl font-light mb-8">Single-origin coffees that honor the soil
                they grew in.</p>
            <button
                class="bg-cream text-earth font-bold uppercase tracking-widest py-4 px-10 rounded-full hover:bg-clay hover:text-white transition-all duration-300 transform hover:scale-105">
                Shop All Coffee
            </button>
        </div>
        <!-- Decorative Circle -->
        <div class="absolute -bottom-24 -right-24 w-64 h-64 bg-earth opacity-20 rounded-full blur-3xl"></div>
        <div class="absolute -top-24 -left-24 w-80 h-80 bg-clay opacity-20 rounded-full blur-3xl"></div>
    </header>

    <!-- Products Section -->
    <main class="max-w-7xl mx-auto px-6 pb-24">
        <div class="flex justify-between items-end mb-12 border-b border-gray-200 pb-4">
            <h2 class="font-display text-4xl uppercase text-earth">Current Offerings</h2>
            <span class="text-sm font-bold uppercase tracking-widest text-gray-400">Freshly Roasted</span>
        </div>

        <div id="loading" class="text-center text-xl font-display text-gray-400 py-12">
            Loading Inventory...
        </div>

        <div id="product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12">
            <!-- Cards injected here -->
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-earth text-cream py-12 text-center">
        <h3 class="font-display text-2xl uppercase mb-4">Tierra de Café</h3>
        <p class="text-sm opacity-50">&copy; 2024 Tierra de Café Roasting Co.</p>
    </footer>

    <script>
        // CONFIG:
        // We are in src/business_agent/web_tierra_de_cafe/
        // Data is in src/business_agent/data/
        const DATA_URL = '../data/tierra_de_cafe_products.json';
        const IMAGE_BASE_PATH = '../data/images/tierra_cafe/';

        async function initStore() {
            try {
                const response = await fetch(DATA_URL);
                if (!response.ok) throw new Error("Data not found");
                const products = await response.json();
                renderProducts(products);
            } catch (err) {
                console.error(err);
                document.getElementById('loading').innerText = "Unable to load products. Check console.";
            }
        }

        function renderProducts(products) {
            const grid = document.getElementById('product-grid');
            document.getElementById('loading').style.display = 'none';

            products.forEach((product, index) => {
                // Image Logic: Handle array and extract filename (png support)
                let imgSrc = 'https://via.placeholder.com/400x500?text=No+Img';
                if (product.image && product.image.length > 0) {
                    const filename = product.image[0].split('/').pop();
                    imgSrc = IMAGE_BASE_PATH + filename;
                }

                // Price Logic
                const price = product.offers ? product.offers.price : '0.00';

                // Stagger Animation Delay
                const delay = index * 100; // ms

                const card = document.createElement('div');
                card.className = "group cursor-pointer opacity-0 animate-fade-up";
                card.style.animationDelay = `${delay}ms`;

                card.innerHTML = `
                    <div class="relative bg-white rounded-lg overflow-hidden mb-4 shadow-sm hover:shadow-xl transition-shadow duration-300 aspect-[3/4]">
                        <div class="absolute inset-0 bg-stone-100"></div>
                        <img src="${imgSrc}" 
                             alt="${product.name}" 
                             class="absolute inset-0 w-full h-full object-contain p-6 transform transition-transform duration-500 group-hover:scale-110"
                             onerror="this.src='https://via.placeholder.com/400x500?text=Image+Missing'">
                        
                        <!-- Quick Add Button (appears on hover) -->
                        <div class="absolute bottom-4 right-4 translate-y-12 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300">
                            <button class="bg-earth text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-clay">
                                <span class="text-xl">+</span>
                            </button>
                        </div>
                    </div>

                    <div class="space-y-1">
                        <div class="text-xs font-bold uppercase tracking-widest text-clay">${product.brand?.name || 'Roaster'}</div>
                        <h3 class="font-display text-xl leading-tight group-hover:text-clay transition-colors">${product.name}</h3>
                        <p class="text-sm text-gray-500 line-clamp-2 min-h-[2.5em]">${product.description}</p>
                        <div class="pt-2 font-bold text-lg">$${price}</div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        initStore();
    </script>
</body>

</html>